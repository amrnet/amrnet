# ReadTheDocs Multi-Language Configuration for AMRnet
version: 2

# Build configuration
build:
  os: ubuntu-22.04
  tools:
    python: "3.11"
  jobs:
    post_create_environment:
      - pip install --upgrade pip setuptools wheel
      - pip install -r docs/requirements.txt
      - pip install sphinx-intl babel
    post_install:
      # Compile all translation files
      - cd docs && find locale/ -name "*.po" -exec msgfmt {} -o {}.mo \; || true

# Python configuration
python:
  install:
    - requirements: docs/requirements.txt
    - method: pip
      path: .

# Sphinx configuration - build with language detection
sphinx:
  builder: html
  configuration: docs/conf.py
  fail_on_warning: false

# Format configuration
formats:
  - pdf
  - htmlzip

# Search configuration
search:
  ranking:
    api.rst: 2
    tutorial.rst: 3
    userguide.rst: 3
  ignore:
    - locale/
    - _build/
    - "*.po"
    - "*.pot"
    - "*.mo"
# Language detection from environment variable
# This allows building different languages on different RTD projects
#
# SETUP INSTRUCTIONS:
# 1. Create separate ReadTheDocs projects for each language:
#    - amrnet (English - no env var needed)
#    - amrnet-es (Spanish)
#    - amrnet-fr (French)
#    - amrnet-pt (Portuguese)
#
# 2. In each non-English project's Admin â†’ Environment Variables, add:
#    Spanish project:    SPHINX_LANGUAGE_ES = es
#    French project:     SPHINX_LANGUAGE_FR = fr
#    Portuguese project: SPHINX_LANGUAGE_PT = pt
#
# 3. The conf.py file will automatically detect these variables and build
#    the appropriate language version using the compiled .mo files
